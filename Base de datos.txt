create table Usuarios(
correo varchar(60) primary key not null,
nombre varchar(40) not null,
primerApellido varchar(40) not null,
segundoApellido varchar(40) not null,
noControl varchar(8) not null,
contrasenia varchar(40) not null,
carrera varchar(40) not null,
tipoUsuario varchar(40) not null);
ALTER TABLE Usuarios
ADD CONSTRAINT CHECK (tipoUsuario='ASESOR' OR tipoUsuario='DEPARTAMENTO');


create table Integrantes(
  noControl varchar(8) primary key not null,
  nombre varchar(40) not null,
  primerApellido varchar(40) not null,
  segundoApellido varchar(40) not null,
  noEquipo int(8) not null
);


create table Equipos(
noEquipo int(8) primary key not null,
proposito varchar(100),
noControl varchar(8)
);

ALTER TABLE Equipos
add constraint FOREIGN KEY (noControl) REFERENCES Integrantes(noControl);


CREATE TABLE Proyectos(
    noFolio varchar(12) PRIMARY KEY NOT NULL,
    correo VARCHAR(50),
    duenio VARCHAR (50) not NULL,
    coasesor VARCHAR(150),
    titulo VARCHAR (150) not NULL,
    justificacion TEXT(22000)not NULL,
    alcances TEXT (13000)not NULL,
    resumen TEXT (25000)not NULL ,
    estatus VARCHAR(20) not NULL ,
    aprobacion VARCHAR (20) not NULL,
    avance DOUBLE(5,2) NOT NULL,
    fecha_registro date NOT NULL,
    directorio varchar(150) NOT NULL
);

ALTER TABLE Proyectos
ADD CONSTRAINT CHECK (estatus='ACTIVO' OR estatus='INACTIVO');
ALTER TABLE Proyectos
ADD CONSTRAINT CHECK (aprobacion='APROBADO' OR aprobacion='NO APROBADO');
ALTER TABLE Proyectos
ADD CONSTRAINT CHECK (avance>=0 OR avance<=100);

create table Historicos(
noFolio varchar(12) not null,
noEquipo int(8) not null,
fecha_inicial Date not null,
fecha_final Date
);
ALTER TABLE Historicos
add constraint FOREIGN KEY (noFolio) REFERENCES Proyectos(noFolio);
ALTER TABLE Historicos
add constraint FOREIGN KEY (noEquipo) REFERENCES Equipos(noEquipo);

create table Primitivas(
noFolio varchar(12) not null,
tituloPrimitivas varchar(100) not null,
justificacionPrimitivas varchar(100)not null,
alcancesPrimitivas varchar(100) not null,
resumenPrimitivas varchar (100)
);
ALTER TABLE Primitivas
add constraint FOREIGN KEY (noFolio) REFERENCES Proyectos(noFolio);
